#!/bin/bash

# -----------------------------
# é…ç½®è¿œç¨‹ä»“åº“åœ°å€
# -----------------------------
GITHUB_REPO="git@github.com:jamie20241210/cj_crud_template.git"

# -----------------------------
# ç¡®ä¿åœ¨å½“å‰ç›®å½•
# -----------------------------
LOCAL_DIR="$(pwd)"
echo "ğŸ“‚ å½“å‰ç›®å½•: $LOCAL_DIR"

# -----------------------------
# åˆå§‹åŒ– Git ä»“åº“
# -----------------------------
if [ ! -d "$LOCAL_DIR/.git" ]; then
    echo "ğŸ“¥ åˆå§‹åŒ– Git ä»“åº“..."
    git init
else
    echo "âœ… å·²ç»æ˜¯ Git ä»“åº“"
fi

# -----------------------------
# é…ç½®è¿œç¨‹ä»“åº“
# -----------------------------
git remote | grep origin > /dev/null
if [ $? -ne 0 ]; then
    echo "ğŸŒ æ·»åŠ è¿œç¨‹ä»“åº“: $GITHUB_REPO"
    git remote add origin "$GITHUB_REPO"
else
    echo "ğŸ”„ è¿œç¨‹ä»“åº“å·²å­˜åœ¨ï¼Œæ›´æ–°ä¸º: $GITHUB_REPO"
    git remote set-url origin "$GITHUB_REPO"
fi

# -----------------------------
# æ·»åŠ æ‰€æœ‰æ–‡ä»¶å¹¶æäº¤
# -----------------------------
echo "ğŸ“ æ·»åŠ æ–‡ä»¶å¹¶æäº¤..."
git add .
git commit -m "åˆå§‹åŒ–æäº¤ï¼šå°†æœ¬åœ°ä»£ç å¼ºåˆ¶æ¨é€åˆ° GitHub" 2>/dev/null

# -----------------------------
# å¼ºåˆ¶æ¨é€åˆ°è¿œç¨‹ä»“åº“
# -----------------------------
echo "ğŸš€ å¼ºåˆ¶æ¨é€åˆ° GitHub..."
git push origin main --force

echo "âœ… å®Œæˆï¼"
